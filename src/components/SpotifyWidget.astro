<div id="spotify" class="absolute bottom-8 right-8 text-white" style="font-family: Consolas, monospace; font-size: 14px; line-height: 20px;">
	<p class="text-gray-400 mb-2">currently listening to:</p>
	<div id="spotify-content" class="flex items-center gap-3">
		<p class="text-gray-500">loading...</p>
	</div>
</div>

<script>
	async function updateSpotify() {
		try {
			const response = await fetch('/api/spotify');
			const data = await response.json();
			const content = document.getElementById('spotify-content');
			
			if (data.isPlaying && content) {
				content.innerHTML = `
					<img src="${data.albumImageUrl}" alt="Album" class="w-12 h-12 object-cover" />
					<div>
						<a href="${data.songUrl}" target="_blank" class="text-white hover:text-blue-400">
							<p class="font-semibold">${data.title}</p>
							<p class="text-gray-400 text-sm">${data.artist}</p>
						</a>
					</div>
				`;
			} else if (content) {
				content.innerHTML = '<p class="text-gray-500">not playing anything</p>';
			}
		} catch (error) {
			console.error('Error fetching Spotify data:', error);
			const content = document.getElementById('spotify-content');
			if (content) {
				content.innerHTML = '<p class="text-gray-500">offline</p>';
			}
		}
	}

	updateSpotify();
	setInterval(updateSpotify, 30000);
</script>
